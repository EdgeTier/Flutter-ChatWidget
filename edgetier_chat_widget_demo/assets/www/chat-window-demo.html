<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Customer Support Chat</title>
        <style>
            html,
            body {
                margin: 0;
                padding: 0;
                height: 100%;
                overflow: hidden;
            }
            footer {
                position: fixed;
                bottom: 0;
                width: 100%;
                text-align: center;
                padding: 10px;
            }
        </style>
        <!-- Load Edgetier Chat Widget script -->
        <script
            id="edgetier-script"
            defer
            src="https://cdn.edgetier.com/piedpiper.js"
            data-id="2"
            data-hidden="true"
        ></script>
        <script defer>
            const edgeTierScript = document.getElementById("edgetier-script");
            edgeTierScript.addEventListener("load", () => {
                // Attempt to open the chat. Even if no agents are online, this won't cause an error.
                EdgeTierChat.setOptions({ hideCloseButton: true, hideMinimiseButton: true });
                EdgeTierChat.open();
                EdgeTierChat.isAvailable((error, data) => {
                    if (error) {
                        console.error(error);
                        return;
                    }

                    if (!data.isAvailable) {
                        const newElement = document.createElement("p");
                        newElement.textContent = "The widget is unavailable. There are currently no agents online.";
                        document.body.appendChild(newElement);
                    }
                });
            });
        </script>
    </head>
    <body>
        <h1>Customer Support Chat</h1>
    </body>
    <footer>
        <a href="https://www.edgetier.com">Powered by Edgetier</a>
    </footer>
</html>
